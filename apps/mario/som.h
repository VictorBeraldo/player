#define SINE 0

int scaleFrequency[] = {
	0 , // 131
	139,
	147,
	155,
	165,
	174,
	185,
	196,
	208,
	220,
	233,
	246,
	262,
	277,
	294,
	311,
	330,
	350,
	370,
	392,
	415,
	440,
	466,
	494,
	523,
	554,
	587,
	622,
	659,
	698,
	740,
	784,
	831,
	880,
	932,
	988,
	1047
};

/*
*10
semibreve         = 16
seminima.         = 12
seminima          = 8
colcheia.         = 6
colcheia          = 4
semicolcheia.     = 3
semicolcheia      = 2
*/

int voice1[] = {
	28,28, 0,28, 0,24,28,31, 0,19, 0,24,19, 0,16,21,23,22,21, 19, 28, 31,33,29,31,
	0,28,24,26,23,24,19, 0,16,21,23,22,21, 19, 28, 31,33,29,31, 0,28,24,26,23,
	0,31,30,29,27,28, 0,20,21,24, 0,21,24,26, 0,31,30,29,27,28, 0,36,36,36, 0,31,30,29,27,28,
	0,20,21,24, 0,21,24,26, 0,27, 0,26,24, 0, 0,31,30,29,27,28, 0,20,21,24, 0,21,24,26,
	0,31,30,29,27,28, 0,36,36,36, 0,31,30,29,27,28, 0,20,21,24, 0,21,24,26, 0,27, 0,26,
	24, 0,24,24,24, 0,24,26,28,24,21,19, 0,24,24,24, 0,24,26,28, 0,
	24,24,24, 0,24,26,28,24,21,19, 0,28,28, 0,28, 0,24,28,31, 0,19, 0,24,19, 0,16,21,23,22,21,
	19,28,31,33,29,31, 0,28,24,26,23, 0,28,24,19, 0,18,21,31,31,21, 0,23,33,33,33,31,29,
	28,24,21,19, 0,28,24,21, 0,20,21,29,29,21, 0,23,29,29,29,28,26,24, 0,12, 0,
	28,24,21, 0,20,21,29,29,21, 0,23,33,33,33,31,29,28,24,21,19, 0,28,24,21, 0,20,
	21,29,29,21, 0,23,29,29,29,28,26,24, 0,12, 0,24,24,24, 0,24,26,28,24,21,19, 0,
	24,24,24, 0,24,26,28, 0,24,24,24, 0,24,26,28,24,21,19
};
int tempo1[] = {
	4, 4, 4, 4, 4, 4, 8, 8, 8, 8, 8,12, 4, 8,12, 8, 8, 4, 8,5,5,5, 8, 4, 4,
	4, 8, 4, 4,12,12, 4, 8,12, 8, 8, 4, 8,5,5,5, 8, 4, 4, 4, 8, 4, 4,12,
	8, 4, 4, 4, 8, 4, 4, 4, 4, 4, 4, 4, 4, 4, 8, 4, 4, 4, 8, 4, 4, 8, 4,12,12, 4, 4, 4, 8, 4,
	4, 4, 4, 4, 4, 4, 4, 4, 8, 8, 4,12,12,20, 8, 4, 4, 4, 8, 4, 4, 4, 4, 4, 4, 4, 4, 4,
	8, 4, 4, 4, 8, 4, 4, 8, 4,12, 8, 4, 4, 4, 8, 4, 4, 4, 4, 4, 4, 4, 4, 4, 8, 8, 4,12,
	12,20, 4, 8, 4, 4, 4, 8, 4, 8, 4,12, 4, 4, 8, 4, 4, 4, 4, 4,32,
	4, 8, 4, 4, 4, 8, 4, 8, 4,12, 4, 4, 4, 4, 4, 4, 4, 8, 8, 8, 8, 8,12, 4, 8,12, 8, 8, 4, 8,
	5,5,5, 8, 4, 4, 4, 8, 4, 4, 8, 4, 4, 8, 4, 8, 8, 4, 8, 4,12, 4,5,5,5,5,5,5,
	4, 8, 4,12, 4, 4, 8, 4, 8, 8, 4, 8, 4,12, 4,5,5,5,5,5,5,12, 4,12, 4,
	4, 8, 4, 8, 8, 4, 8, 4,12, 4,5,5,5,5,5,5, 4, 8, 4,12, 4, 4, 8, 4, 8, 8,
	4, 8, 4,12, 4,5,5,5,5,5,5,12, 4,12, 4, 4, 8, 4, 4, 4, 8, 4, 8, 4, 12, 4,
	4, 8, 4, 4, 4, 4, 4,32, 4, 8, 4, 4, 4, 8, 4, 8, 4,12
};

long soundLastTime1 = 0;
long soundNextTime1 = 0;
int soundSize1 = sizeof(voice1) / sizeof(voice1[0]);
int soundPointer1 = 0;
bool soundPlay1 = 0;

long soundLastTime2 = 0;
long soundNextTime2 = 0;
int soundSize2 = sizeof(voice1) / sizeof(voice1[0]);
int soundPointer2 = 0;
bool soundPlay2 = 0;

bool enableSound = 1;

void startSound() {
	soundPointer1 = 0;
	soundPlay1 = 0;
	soundPointer2 = 0;
	soundPlay2 = 0;
	enableSound = 1;
}

void stopTone(int voice) {

	GD.voice(voice, SINE, 0, 0, 0);
	GD.voice(voice + 1, SINE, 0, 0, 0);
	GD.voice(voice + 2, SINE, 0, 0, 0);
	GD.voice(voice + 3, SINE, 0, 0, 0);

}

void stopSound() {
	stopTone(4);
	stopTone(0);
	soundPointer1 = 0;
	soundPlay1 = 0;
	soundPointer2 = 0;
	soundPlay2 = 0;
	enableSound = 0;
}

void playTone(int freq, int voice, int amp) {
	GD.voice(voice, SINE, freq, amp, amp);
	GD.voice(1 + voice, SINE, 3 * freq, amp / 3, amp / 3);
	GD.voice(2 + voice, SINE, 5 * freq, amp / 5, amp / 5);
	GD.voice(3 + voice, SINE, 7 * freq, amp / 7, amp / 7);
}